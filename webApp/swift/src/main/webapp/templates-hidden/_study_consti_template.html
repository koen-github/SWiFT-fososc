<lift:StudyConsti__EMBED>

<style type="text/css">
div#consti_text
{   visibility:hidden;
    width: 600px;
}
</style>
<!--
<script type="text/javascript" src="/javascript/showStudyConstiOnNewPage.js"></script>
-->
<script>
if( getURLParameter('false') == 'true')
{  $('div.column.span-6.colborder.sidebar').css('display', 'none');
   $('body').css('margin-left', 'auto').css('margin-right', 'auto');
}
</script>



Study the constitution below by holding the 'g' key down on your keyboard. (This also shows the 'Continue' button at the bottom of the page for when you are done studying.)

<h2>Info</h2>
<table>
   <tr><td>Creationdate:</td>             <td><top:creationDate /></td>      </tr>
   <tr><td>Created by:</td>               <td><top:creator /></td>            </tr>
   <tr><td>Version:</td>                  <td><top:versionDateTime /></td>            </tr>
<!--
   <tr><td>Description:</td>              <td><top:description /></td>        </tr>
   <tr><td>Score on property TODO:</td>   <td>TODO</td>                       </tr>
   <tr><td>Score on property TODO:</td>   <td>TODO</td>                       </tr>
   <tr><td>Number of followers:</td>      <td><top:numberOfFollowers /></td>  </tr>
-->
</table>

<hr />
<p id="blank">
If you want to read on, please <b>hold the 'g' key.</b>
</p>
<div id="consti_text">
<table>
   <tr><td colspan="2"><hr />                             </td></tr>
   <tr><td colspan="2"><top:constitutionText /></td>           </tr>
   <tr><td colspan="2"><hr />    </td>                         </tr>
</table>
</div>

<script type="text/javascript">  
// Problem here: using visibility = hidden, will not stop the element from taking up its space. This is problematic, when other elements are shown after the element which you do not want to display.
// A solution is using display = none or block, however then returning to the original scroll-location will not work anymore. However, I'm not sure... Perhaps the isolated constitution (not embedded in a round) will work.


$(document).ready(function(){
    	    function setCookie(c_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? '' : '; expires='+exdate.toUTCString());
document.cookie=c_name + '=' + c_value;
}

function getCookie(c_name)
{
var c_value = document.cookie;
var c_start = c_value.indexOf(' ' + c_name + '=');
if (c_start == -1)
  {
  c_start = c_value.indexOf(c_name + '=');
  }
if (c_start == -1)
  {
  c_value = null;
  }
else
  {
  c_start = c_value.indexOf('=', c_start) + 1;
  var c_end = c_value.indexOf(';', c_start);
  if (c_end == -1)
  {
c_end = c_value.length;
}
c_value = unescape(c_value.substring(c_start,c_end));
}
return c_value;
}

  
    
   // scroll(0,0);
    var keyisdown = false;
    var scroll_last_position = 0;
       	 var keycode = 86; //alt key
   	 var keycode2 = 71; //g key
   	 //alert(e.which);
   	 var scrolled = false;
   	pressedKeys = [];
    
    $('body').bind('keydown',function(e)
    {
   	// if (e.altKey == true ) {
   	 if( e.keyCode == keycode2)
   	{
		
		if(scrolled == false)
		{
   		 $(window).scrollTop(getCookie('last_pos'));
		scrolled = true;
   		} 
   		 $('#consti_text').css('visibility', 'visible');
   		 $('#blank').css('visibility', 'hidden');

   		// scroll_last_position = $(window).scrollTop();
   		 setCookie('last_pos', $(window).scrollTop(), 365);
   //	 }
   }
}

    ).bind('keyup',function()
    {	 console.log (scroll_last_position);
   	 scrolled = false;
   	 $('#blank').css('visibility', 'visible');
   	 $('#consti_text').css('visibility', 'hidden');

   	 scroll(0,0);
    });

});

</script>

</lift:StudyConsti__EMBED>
